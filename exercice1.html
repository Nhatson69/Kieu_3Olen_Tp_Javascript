<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>

    <style>
        .main {
            display: flex;
            align-items: center;
            justify-content: center;
            border-style: solid;
            border-color: black;
            flex-direction: column;

        }

        button {
            margin: 20px;
            height: 60px;
            width: 120px;
        }

        p {
            margin-left: 20px;
        }

        .comparer {
            display: flex;

        }

        .score {
            display: flex;
            align-items: center;
            justify-content: center;
        }

        #result {
            margin-left: 5px;
        }

        #tour {
            color: red;
            font-style: oblique;
            font-size: 30px;
        }

        #joueur {
            font-size: 20px
        }

        #ordinateur {
            font-size: 20px;
        }
    </style>
</head>

<body>
    <div class="main">
        <div class="bouton">
            <button id="pierre">Pierre</button>

            <button id="feuille">Feuille</button>

            <button id="ciseaux">Ciseaux</button>
        </div>

        <div class="comparer">
            <p id="ordi"></p>
            <p id="result"> </p>
        </div>

        <div class="score">
            <p id="tour"></p>
            <p id="joueur"> </p>
            <p id="ordinateur"></p>
        </div>

    </div>

</body>

</html>

<script>
    // initialisation des valeurs 
    let p = "pierre"
    let f = "feuille"
    let c = "ciseaux"
    let aff = { joueur: 0, ordinateur: 0, tour: 0 };
    let tab = ["pierre", "feuille", "ciseaux"]
    let alea = Math.random()
    let ordi = ""
    console.log("alea vaut ", alea)

    // lors de l'action click du bouton on compare l'élément p avec le choix de l'ordinateur, on augmente le nombre de tour et on relance le choix de l'ordinateur
    let choixP = document.getElementById("pierre")
    choixP.addEventListener("click", function () {
        console.log("Pierre");
        compare(p)
        TourDeJeu(aff)
        reset()
    });

    // paeril mais avec l'élément f
    let choixF = document.getElementById("feuille")
    choixF.addEventListener("click", function () {
        console.log("Feuille")
        compare(f)
        TourDeJeu(aff)
        reset()
    });

    // paeril mais avec l'élément c
    let choixC = document.getElementById("ciseaux")
    choixC.addEventListener("click", function () {
        console.log("Ciseaux")
        compare(c)
        TourDeJeu(aff)
        reset()
    });

    // permet de comparer le choix entre le joueur et l'ordinateur et d'ensuite augmenter le score de chacun selon le résultat
    function compare(x) {
        console.log(alea);
        if (alea < 0.33) { // l'ordi fait pierre si alea en dessus de 0.33
            ordi = tab[0]
            console.log("L'ordi a fait", ordi)
            document.getElementById("ordi").innerText = "L'ordi joue pierre et ";

            if (x == tab[1]) { // si le choix du joueur est feuille il gagne 
                console.log("Le joueur a gagné")
                document.getElementById("result").innerText = "le joueur a gagné !";
                aff.joueur = aff.joueur + 1;
                document.getElementById("joueur").innerText = "Score joueur : " + aff.joueur;
            }
            else if (x == ordi) { // si le joueur et l'ordi ont le même choix égalité
                console.log("Nul")
                document.getElementById("result").innerText = "il y a egalite"
            }
            else {
                console.log("L'ordi a gagné")
                document.getElementById("result").innerText = "l'ordi a gagné !"
                aff.ordinateur = aff.ordinateur + 1
                document.getElementById("ordinateur").innerText = "Score ordinateur : " + aff.ordinateur;
            }
        }

        else if (alea > 0.33 && alea < 0.66) {  // l'ordinateur joue feuille si alea est entre 0.33 et 0.66
            ordi = tab[1]
            console.log("L'ordi a fait", ordi)
            document.getElementById("ordi").innerText = "L'ordi joue feuille et ";
            if (x == tab[2]) { // si le choix du joueur est ciseaux il gagne
                console.log("Le joueur a gagné")
                document.getElementById("result").innerText = "le joueur a gagné !!"
                aff.joueur = aff.joueur + 1
                document.getElementById("joueur").innerText = "Score joueur : " + aff.joueur;
            }
            else if (x == ordi) {
                console.log("Nul")
                document.getElementById("result").innerText = "il y a egalite"
            }
            else {
                console.log("l'ordi a gagné")
                document.getElementById("result").innerText = "l'ordi a gagné !!"
                aff.ordinateur = aff.ordinateur + 1
                document.getElementById("ordinateur").innerText = "Score ordinateur : " + aff.ordinateur;
            }
        }

        else if (alea > 0.66) { // l'ordi joue ciseau si alea est au dessus de 0.66
            ordi = tab[2]
            console.log("L'ordi a fait", ordi)
            document.getElementById("ordi").innerText = "l'ordi joue ciseaux et ";

            if (x == tab[0]) { // si le choix du joueur est pierre il gagne
                console.log("Le joueur a gagné")
                document.getElementById("result").innerText = "le joueur a gagné !!!"
                aff.joueur = aff.joueur + 1
                document.getElementById("joueur").innerText = "Score joueur : " + aff.joueur;
            }
            else if (x == ordi) {
                console.log("Nul")
                document.getElementById("result").innerText = "il y a egalite"
            }
            else {
                console.log("L'ordi a gagné")
                document.getElementById("result").innerText = "l'ordi a gagné !!!"
                aff.ordinateur = aff.ordinateur + 1
                document.getElementById("ordinateur").innerText = "Score ordinateur : " + aff.ordinateur;
            }
        }
    }

    // function pour incrémenter le nombre de tour
    function TourDeJeu(obj) {
        console.log("tour = ", obj.tour)
        obj.tour = obj.tour + 1
        console.log("tour = ", obj.tour)
        document.getElementById("tour").innerText = "Tour : " + obj.tour
    }

    // permet de relancer le choix pour l'ordi
    function reset() {
        alea = Math.random()
        console.log("le nouveau alea vaut ", alea)
    }
</script>
